import HandlerInfo from '../handler-info';
import { resolveHook, merge } from '../utils';

// Generated by URL transitions and non-dynamic route segments in named Transitions.
export default class UnresolvedHandlerInfoByParam extends HandlerInfo {
  constructor(props) {
    super(props);
    this.params = this.params || {};
  }

  getModel(payload) {
    var fullParams = this.params;
    if (payload && payload.queryParams) {
      fullParams = {};
      merge(fullParams, this.params);
      fullParams.queryParams = payload.queryParams;
    }

    var handler = this.handler;
    var hookName =
      resolveHook(handler, 'deserialize') || resolveHook(handler, 'model');

    return this.runSharedModelHook(payload, hookName, [fullParams]);
  }
}
